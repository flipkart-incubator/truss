!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.Truss=n():e.Truss=n()}(this,function(){return function(e){function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e){h(e,e.moduleName,e.instance,e.instanceConfig),d()}Object.defineProperty(n,"__esModule",{value:!0}),n.createInstance=i;var r=t(1),u=o(r),c=t(3),l=o(c),s=t(2),a=function(e){return e.listensTo&&e.listensTo.length&&e.listensTo.forEach(function(n){e.subscribe({eventName:n.eventName,callback:e[n.callback],context:e,eventPublisher:n.eventPublisher,once:n.once})}),f(e)},f=function(e){return console.log("_listenForInitOn called for: "+e.moduleName),console.log(e),console.log("-------------"),new Promise(function(n,t){n(e.path)})},d=function p(e){e||(e=s.moduleS.filter(function(e){return 1===e.path.split(".").length})),e.forEach(function(e){a(e).then(function(n){var t=u.default.getLevelsFromPath(e.path),o=s.moduleS.filter(function(e){return e.path.indexOf(n+".")>-1&&u.default.getLevelsFromPath(e.path)===t+1});p(o)})})},h=function v(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.moduleName,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.instance,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.instanceConfig,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(!i&&(i=n,s.moduleS.findInstance(null,"moduleName",n).length>0))return void console.warning("Module ("+n+") is already registered at same path. Skipping...");if(i&&s.moduleS.findInstance(i).length>0)return void console.warning("Module ("+n+") is already registered at same path. Skipping...");var r=Object.assign({},{moduleName:n},l.default,t,{uniqueId:u.default.getNextUniqueId()},{path:i},{lifeStage:{initiated:!0,eventLocked:!1,renderDependencyCalled:!1,renderCalled:!1,postRenderCalled:!1}},o);s.moduleS.insertInstance(r),t.config&&t.config.modules&&t.config.modules.length&&t.config.modules.forEach(function(e){v(e,void 0,void 0,void 0,i+"."+e.moduleName)})}}).call(n,t(4)(e))},function(e,n){"use strict";function t(e,n){for(var t=-1,o=e.length;++t<o&&n.indexOf(e.charAt(t))>-1;);return t}function o(e,n){for(var t=e.length;t--&&n.indexOf(e.charAt(t))>-1;);return t}Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},r=-1;n.default={getLevelsFromPath:function(e,n){return(e.match(RegExp("\\.","g"))||[]).length},getNextUniqueId:function(){return"UIF-"+ ++r},pick:function(e,n){var t={};return n.forEach(function(n){t[n]=e[n]}),t},length:function(e){return Array.isArray(e)?e.length:"object"===(void 0===e?"undefined":i(e))?Object.keys(e).length:"string"==typeof e?e.length:0},trim:function(e,n){return e.slice(t(e,n),o(e,n)+1)},clearSlashes:function(e){return this.trim(e,"/")}}},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=Object.assign([],{getObjByPath:function(e){var n=this,t=void 0;return e.split(".").forEach(function(e){t=t||n,t=t[e]}),t},insertInstance:function(e,n){var t=void 0;t=n?this.getObjByPath(n):this,t.push(e)},deleteInstance:function(e){if("string"==typeof e){var n=e.split("."),t=n.splice(n.length-1,1);delete this.getObjByPath(n.join("."))[t]}},findInstance:function(e,n,t){return this.filter(function(o){return e?o.path===e:t&&n&&o[n]===t?!0:void 0})},overrideInstance:function(e,n,t,o,i){var r=void 0;r=e?this.getObjByPath(e):this;for(var u in o)r[u]=o[u]}}),o="undefined"!=typeof window,i={};n.isBrowser=o,n.subscriptions=i,n.moduleS=t},function(e,n,t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(1),r=o(i),u=t(2),c=function(e){document.querySelector(e.container).innerHTML='<div id="'+e.uniqueId+'"></div>'};n.default={render:function(e){c(this);var n=this.uniqueId,t=e||this.modulePlaceholders;document.querySelector("#"+n).innerHTML=this.template(t)},subscribe:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.eventName;u.subscriptions[n]||(u.subscriptions[n]=[]);var t=r.default.pick(e,["callback","context","eventPublisher","once"]);u.subscriptions[n].push(t)},publish:function(){},unsubscribe:function(e,n,t){var o=u.subscriptions[n];u.subscriptions[n]=o.filter(function(e){return!(e.callback===t)})}}},function(e,n){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});